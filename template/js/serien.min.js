function closeShow(){$("#showDesc").hide(),$("#showEpDesc").hide(),$("#showInfo").hide(),$(".selectedShow").addClass("unselectedShow"),lastIdShow=0}function selSpanText(e){var o,s;window.getSelection&&document.createRange?(s=window.getSelection(),o=document.createRange(),o.selectNodeContents($(e)[0]),s.removeAllRanges(),s.addRange(o)):document.selection&&document.body.createTextRange&&(o=document.body.createTextRange(),o.moveToElementText($(e)[0]),o.select())}function openNav(e){openNav_(e,!0)}function openNav_(e,o){closeNavs_(o),$(e).addClass("open")}function closeNavs(){closeNavs_(!0)}function closeNavs_(e){$(".dropdown-submenu").removeClass("open"),$("#dropAdmin").removeClass("open"),$("#dropSearch").removeClass("open"),isAdmin&&$("#dropViewmode").removeClass("open"),e&&$("#dropLatestEps").removeClass("open")}function toggleActive(e){$(e).addClass("active")}function toggleDActive(e){$(e).removeClass("active")}function searchDbForString(e,o){if(null==e)return!1;var s=$.trim(e.value).toLowerCase(),t=getKeyCode(o);if(13!=t)return!1;var i="./?show=serien&dbSearch=";null!=s&&""!=s&&(i+=s),window.location.href=i}function resetDbSearch(){return""==$("#searchDBfor").val()?!1:void(window.location.href="./?show=serien&dbSearch=")}function getKeyCode(e){return e=e||window.event,e.keyCode}function resizeAll(e){epsPositioned=!1,moveDivR(e),moveDivL(-351),moveDivEpDesc(-351)}function toggleEps(e,o,s){epsPositioned=!1,toggleEps_(e,o,s)}function toggleEps_(e,o,s){if(null!=o||null!=s){if(null==s){var t=e.replace("iD","tgl");s=document.getElementById(t)}$(".plmin").removeClass("showlink").addClass("hidelink");var i=!1,n=document.getElementsByTagName("TR");if(null!=n)for(var l=0;l<n.length;l++){var d=n[l];if(null!=d&&-1!=d.className.indexOf("epTR")){var a=d.className.indexOf(e)>-1;a?"none"==d.style.display?($(d).fadeIn(300,"linear"),i=!0):$(d).fadeOut(300,"linear"):"none"!=d.style.display&&$(d).hide()}}null!=s&&(i?($(s).removeClass("hidelink"),$(s).addClass("showlink")):($(s).removeClass("showlink"),$(s).addClass("hidelink"))),moveDivR(i?1:0),moveDivL(-351),moveDivEpDesc(-351)}}function spoilIt(){$("#epSpoiler").hide(),$("#epDescr").show()}function showGuests(){$("#epGuest").hide(),$("#epGuests").show()}function setFlagsBack(e){"#showInfo"==e?eplistLoading=!1:"#showDesc"==e?descLoading=!1:"#showEpDesc"==e&&(epDescLoading=!1)}function checkShowInfo(e,o){var s=0;do{if($(e).width()>0)return cursorBusy(""),resizeAll(o),void setFlagsBack(e);if(s++>100)return}while(0==$(e).width());setFlagsBack(e)}function cursorBusy(e){$("body").css("cursor",e),$("#xbmcDB").css("cursor",e),$("#showInfo").css("cursor",e),$("td").css("cursor",e),$("a").css("cursor",""==e?"pointer":e),$("a.fancy_msgbox, a.fancy_addEpisode, li.dropdown-submenu>a").css("cursor",""==e?"default":e)}function loadLatestShowInfo(e,o,s,t,i){fromNavbar=!0,$("#showInfo").hide(),loadShowInfoPlus(e,o,t,i),loadEpDetails(e,s),toggleEps_(t,i,null),epsPositioned=!1,moveDivR(3),$("#showInfo").show(),closeNavs()}function loadShowInfo(e,o){loadShowInfoPlus(e,o,null,null)}function loadShowInfoPlus(e,o,s,t){return epDescLoading||lastIdShow==o?void 0:(cursorBusy("progress"),$("#showEpDesc").text(""),moveDivEpDesc(0),$(".sTR").children("TD").removeClass("selectedShow unselectedShow"),$("#iD"+o).children("TD").addClass("selectedShow"),loadEplistPlus(e,s,t),loadDesc(e,o),lastIdShow=o,lastIdEp=-1,!0)}function loadEpDetails(e,o){epsPositioned=!1,epDescLoading||lastIdEp==o||($(".epTR").children("TD").removeClass("selectedShow"),$("#"+o).children("TD").addClass("selectedShow"),epDescLoadedOnce?$("#showEpDesc").fadeOut(100,"linear",function(){loadEpDetails_(e,o)}):loadEpDetails_(e,o),epDescLoadedOnce=!0)}function loadEpDetails_(e,o){return epDescLoading=!0,cursorBusy("progress"),$("#showEpDesc").text(""),$("#showEpDesc").show(),moveDivEpDesc(0),$("#showEpDesc").load($(e).attr("_href"),function(){$("#showEpDesc").animate({width:"+=351px",left:"-=352px",height:"+=400px"},"slow",function(){var e=$("#epDescription").height()+"px";checkShowInfo("#showEpDesc",1),$("#showEpDesc").css({width:"351px",height:e}),$("#"+o).children("TD").addClass("selectedShow")})}),lastIdEp=o,epsPositioned=!0,!1}function moveDivEpDesc(e){var o=0>lastIdShow?"#showsDiv":".selectedShow";if($(o).length){var s=1,t=$.browser.webkit?3:0,i=$(o).position().left,n=$("#showDesc").position().top+$(".showDesc").height()+s,l=($("#showDesc").width(),"auto"),d=n+"px",a=Math.floor(i+e+t)+"px";$("#showEpDesc").css({position:"absolute",top:d,left:a,width:"0px",height:l,"z-index":"2"}),epDescLoading||($("#showEpDesc").css({width:"351px"}),$("#epDescription").css({width:$.browser.webkit?"350px":"352px"}))}}function loadEplist(e){loadEplistPlus(e,null,null)}function loadEplistPlus(e,o,s){return epsPositioned=!1,eplistLoading?!1:(epListLoadedOnce?$("#showInfo").fadeOut(200,"linear",function(){loadEplistPlus_(e,o,s)}):loadEplistPlus_(e,o,s),void(epListLoadedOnce=!0))}function loadEplist_(e){loadEplistPlus_(e,null,null)}function loadEplistPlus_(e,o,s){eplistLoading=!0,$("#showInfo").text(""),$("#showInfo").show(),moveDivR(0),$("#showInfo").load($(e).attr("eplist"),function(){$("#showInfo").animate({width:"+=385px"},"slow",function(){var e="auto";if(checkShowInfo("#showInfo",0),$("#showInfo").css({width:"385px",height:e}),$.browser.mozilla&&$("#showInfo").css({left:"+=1px"}),toggleEps(o,s,null),initShowEpFancies(),fromNavbar){var t=$(".selectedShow").offset().top-50;$("html, body").animate({scrollTop:t},250),fromNavbar=!1}})})}function loadDesc(e,o){return descLoading?!1:(descLoadedOnce?$("#showDesc").fadeOut(200,"linear",function(){loadDesc_(e,o)}):loadDesc_(e,o),void(descLoadedOnce=!0))}function loadDesc_(e,o){var s=0>lastIdShow?"#showsDiv":".selectedShow";if($(s).length){var t=$.browser.webkit?0:-1,i=$.browser.webkit?3:1,n=0;descLoading=!0,$("#showDesc").text(""),$("#showDesc").show(),moveDivL(n);var l=$(s).position().top+t+"px",d=$(s).position().left,a=Math.floor(d+n+i-352)+"px";$("#showDesc").load($(e).attr("desc"),function(){$("#showDesc").animate({width:"+=351px",left:a,top:l},"slow",function(){checkShowInfo("#showDesc",0),$("#showDesc").css({width:"351px",left:a}),$(".fClose").show(),initShowDescFancies(),drawDonut(o)})})}}function moveDivL(e){var o=0>lastIdShow?"#showsDiv":".selectedShow";if($(o).length){var s=$.browser.webkit?0:-1,t=$.browser.webkit?2:.5,i=$(o).position().left,n=$(o).position().top+s,l=($("tbody:first").width(),"auto"),d=n+"px",a=Math.floor(i+e+t)+"px";$("#showDesc").css({position:"absolute",top:d,left:a,width:"0px",height:l,"z-index":"2"}),descLoading||$("#showDesc").css({width:"351px"})}}function moveDivR(e){if(!epsPositioned){var o=0>lastIdShow?"#emptyTR":".selectedShow";if($(o).length){var s=$.browser.webkit?0:-1,t=$.browser.webkit?1:-.5,i=$(o).position().left,n=$(o).position().top+s,l=$("tbody:first").width(),d="auto",a=n+"px",c=Math.floor(i+l+t+e)+"px";$("#showInfo").css({position:"absolute",top:a,left:c,width:"0px",height:d,"z-index":"2"}),eplistLoading||$("#showInfo").css({width:"385px"})}}}function toggleAirdates(){if(isAdmin){var e=$("#showsTable").width();airdateVisible?($(".showName").removeClass("airdShown").addClass("airdHidden"),$(".airdate").hide(),e-=75):($(".showName").removeClass("airdHidden").addClass("airdShown"),$(".airdate").show(),e+=75),airdateVisible=!airdateVisible,$("#showsTable").css({width:e+"px"}).css({"min-width":e+"px"}),resizeAll(0)}}function checkForCheck(){return null!=ids&&""!=ids?confirm("Attention:\nSelection will be lost!"):!0}function clearSelectBoxes(e){var o=document.getElementsByTagName("input"),s=null!=e?e.checked:!1;for(null==e&&$("#clearSelectAll").attr("checked",!1),i=0;i<o.length;i++){var t=o[i];null!=t&&"copyAsScript"!=t.id&&"clearSelectAll"!=t.id&&("checkbox"!=t.type||t.checked==s||t.disabled||(t.checked=s,selected(t,!1,!1,isAdmin)))}var n=document.getElementById("result"),l=document.getElementById("movieList");null!=l&&(doRequest(),l.style.display=s?"block":"none",s||(n.innerHTML="",ids=""))}function selected(e,o,s){var t=$(e).parent().parent();e.checked?(ids=ids+(0==ids.length?"":", ")+e.value,$(t).children("TD").addClass("highLighTR")):($(t).children("TD").removeClass("highLighTR"),-1!=ids.indexOf(e.value+", ")?ids=ids.replace(e.value+", ",""):-1!=ids.indexOf(", "+e.value)?ids=ids.replace(", "+e.value,""):-1==ids.indexOf(",")&&(ids=ids.replace(e.value,"")));var i=document.getElementById("result"),n=document.getElementById("movieList");if(null!=n){var l=document.getElementById("clearSelectAll");return""==ids?(n.style.display="none",i.innerHTML=""):n.style.display="block",o&&(l.checked=""==ids?!1:!0),s&&doRequest(),!0}}function doRequest(){doRequest__(!0,ids)}function saveSelection(){saveSelection__(!0,ids)}function drawDonut(e){if(!(null==e||0>e)){var o="./detailSerieDesc?data&id="+e,s=$.ajax({url:o,dataType:"json",async:!1}).responseText,t=null!=s&&""!=s;if(t){var i=null;$("#donutChartPir").length?i=$("#donutChartPir").get(0).getContext("2d"):console.log("Error: Canvas not found with selector #donutChartPir");var n={percentageInnerCutout:45,showTooltips:!1,animationSteps:30,animation:!0,segmentShowStroke:!0,segmentStrokeWidth:1},l=null;null!=i&&(l=new Chart(i).Doughnut(null,n),$.each($.parseJSON(s),function(e,o){l.addData({value:o.value,color:o.color,highlight:o.highlight,label:o.label})}))}}}var airdateVisible=!1,descLoadedOnce=!0,epListLoadedOnce=!0,epDescLoadedOnce=!0,eplistLoading=!1,epDescLoading=!1,descLoading=!1,epsPositioned=!1,fromNavbar=!1,lastIdShow=-1,lastIdEp=-1,ids="";$(document).ready(function(){$(".dropdown-toggle").dropdown(),bindF&&$(document).keydown(function(e){e.ctrlKey&&"70"==e.keyCode&&(e.preventDefault(),openNav("#dropSearch"),$("#searchDBfor").focus())})}),$(window).resize(function(){resizeAll(0)}),$("#showsTable").ready(function(){resizeAll(0)});