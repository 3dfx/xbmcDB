var airdateVisible=!1,epListLoadedOnce=!1,epDescLoadedOnce=!0,descLoadedOnce=!0,eplistLoading=!1,epDescLoading=!1,descLoading=!1,epsPositioned=!1,fromNavbar=!1,lastIdShow=-1,lastIdEp=-1,ids="",unsaved=!1;function closeShow(){$("#showDesc").hide(),$("#showEpDesc").hide(),$("#showInfo").hide(),$(".selectedShow").addClass("unselectedShow"),lastIdShow=0}function selSpanText(c){var a,b;window.getSelection&&document.createRange?(b=window.getSelection(),(a=document.createRange()).selectNodeContents($(c)[0]),b.removeAllRanges(),b.addRange(a)):document.selection&&document.body.createTextRange&&((a=document.body.createTextRange()).moveToElementText($(c)[0]),a.select())}function openNav(a){openNav_(a,!0)}function openNav_(a,b){closeNavs_(b),$(a).addClass("open")}function closeNavs(){closeNavs_(!0)}function closeNavs_(a){$(".dropdown-submenu").removeClass("open"),$("#dropAdmin").removeClass("open"),$("#dropSearch").removeClass("open"),isAdmin&&$("#dropViewmode").removeClass("open"),a&&$("#dropLatestEps").removeClass("open")}function toggleActive(a){$(a).addClass("active")}function toggleDActive(a){$(a).removeClass("active")}function searchDbForString(b,d){if(null==b)return!1;var a=$.trim(b.value).toLowerCase();if(13!==getKeyCode(d))return!1;var c="./?show=serien&dbSearch=";null!=a&&""!==a&&(c+=a),window.location.href=c}function resetDbSearch(){if(""===$("#searchDBfor").val())return!1;window.location.href="./?show=serien&dbSearch="}function getKeyCode(a){return(a=a||window.event).keyCode}function resizeAll(a){epsPositioned=!1,moveDivR(a),moveDivL(-351),moveDivEpDesc(-351)}function toggleEps(a,b,c){epsPositioned=!1,toggleEps_(a,b,c)}function toggleEps_(d,h,c){var b=null;if(null==c&&null!=d&&(c=d.replace("iD","tgl")),null!=c&&(b=document.getElementById(c)),null!=b){$(".plmin").removeClass("showlink").addClass("hidelink");var g=!1,e=document.getElementsByTagName("TR");if(null!=e)for(var f=0;f<e.length;f++){var a=e[f];if(null!=a&& -1!==a.className.indexOf("epTR")){if(!(a.className.indexOf(d)> -1)){"none"!==a.style.display&&$(a).hide();continue}"none"===a.style.display?($(a).fadeIn(300,"linear"),g=!0):$(a).fadeOut(300,"linear")}}g?($(b).removeClass("hidelink"),$(b).addClass("showlink")):($(b).removeClass("showlink"),$(b).addClass("hidelink")),moveDivR(0),moveDivL(-351),moveDivEpDesc(-351)}}function spoilIt(){$("#epSpoiler").hide(),$("#epDescr").show()}function showGuests(){$("#epGuest").hide(),$("#epGuests").show()}function setFlagsBack(a){"#showInfo"===a?eplistLoading=!1:"#showDesc"===a?descLoading=!1:"#showEpDesc"===a&&(epDescLoading=!1)}function checkShowInfo(a,b){var c=0;do{if($(a).width()>0){cursorBusy(""),resizeAll(b),setFlagsBack(a);return}if(c++ >100)return}while(0===$(a).width())setFlagsBack(a)}function cursorBusy(a){$("body").css("cursor",a),$("#xbmcDB").css("cursor",a),$("#showInfo").css("cursor",a),$("td").css("cursor",a),$("a").css("cursor",""===a?"pointer":a),$("a.fancy_msgbox, a.fancy_addEpisode, li.dropdown-submenu>a").css("cursor",""===a?"default":a)}function loadLatestShowInfo(a,d,e,b,c){fromNavbar=!0,$("#showInfo").hide(),loadShowInfoPlus(a,d,b,c),loadEpDetails(a,e),toggleEps_(b,c,null),epsPositioned=!1,moveDivR(3),$("#showInfo").show(),closeNavs()}function loadShowInfo(a,b){loadShowInfoPlus(a,b,null,null),moveDivR(-1)}function loadShowInfoPlus(b,a,c,d){if(!epDescLoading&&lastIdShow!==a)return cursorBusy("progress"),$("#showEpDesc").text(""),moveDivEpDesc(0),$(".sTR").children("TD").removeClass("selectedShow unselectedShow"),$("#iD"+a).children("TD").addClass("selectedShow"),loadEplistPlus(b,c,d),loadDesc(b,a),lastIdShow=a,lastIdEp=-1,!0}function loadEpDetails(b,a){epsPositioned=!1,epDescLoading||lastIdEp===a||($(".epTR").children("TD").removeClass("selectedShow"),$("#"+a).children("TD").addClass("selectedShow"),epDescLoadedOnce?$("#showEpDesc").fadeOut(100,"linear",function(){loadEpDetails_(b,a)}):loadEpDetails_(b,a),epDescLoadedOnce=!0)}function loadEpDetails_(a,b){return epDescLoading=!0,cursorBusy("progress"),$("#showEpDesc").text(""),$("#showEpDesc").show(),moveDivEpDesc(0),$("#showEpDesc").load($(a).attr("_href"),function(){$("#showEpDesc").animate({width:"+=351px",left:"-=352px",height:"+=400px"},"slow",function(){var a=$("#epDescription").height()+"px";checkShowInfo("#showEpDesc",1),$("#showEpDesc").css({width:"351px",height:a}),$("#"+b).children("TD").addClass("selectedShow")})}),lastIdEp=b,epsPositioned=!0,!1}function moveDivEpDesc(b){var a=lastIdShow<0?"#showsDiv":".selectedShow";if($(a).length){var c=$.browser.webkit?3:0,d=$(a).position().left,e=$("#showDesc").position().top+$(".showDesc").height()+1;$("#showDesc").width(),$("#showEpDesc").css({position:"absolute",top:e+"px",left:Math.floor(d+b+c)+"px",width:"0px",height:"auto","z-index":"2"}),epDescLoading||($("#showEpDesc").css({width:"351px"}),$("#epDescription").css({width:$.browser.webkit?"350px":"352px"}))}}function loadEplist(a){loadEplistPlus(a,null,null)}function loadEplistPlus(a,b,c){if(epsPositioned=!1,eplistLoading)return!1;epListLoadedOnce?$("#showInfo").fadeOut(200,"linear",function(){loadEplistPlus_(a,b,c)}):loadEplistPlus_(a,b,c),epListLoadedOnce=!0}function loadEplist_(a){loadEplistPlus_(a,null,null)}function loadEplistPlus_(a,b,c){eplistLoading=!0,$("#showInfo").text(""),$("#showInfo").show(),moveDivR(0),$("#showInfo").load($(a).attr("eplist"),function(){$("#showInfo").animate({width:"+=385px"},"slow",function(){if(checkShowInfo("#showInfo",0),$("#showInfo").css({width:"385px",height:"auto"}),$.browser.mozilla&&$("#showInfo").css({left:"+=1px"}),toggleEps(b,c,null),initShowEpFancies(),fromNavbar){var a=$(".selectedShow").offset().top-50;$("html, body").animate({scrollTop:a},250),fromNavbar=!1}})})}function loadDesc(a,b){if(descLoading)return!1;descLoadedOnce?$("#showDesc").fadeOut(200,"linear",function(){loadDesc_(a,b)}):loadDesc_(a,b),descLoadedOnce=!0}function loadDesc_(b,e){var a=lastIdShow<0?"#showsDiv":".selectedShow";if($(a).length){var c=$.browser.webkit?0:-1,d=$.browser.webkit?3:1;descLoading=!0,$("#showDesc").text(""),$("#showDesc").show(),moveDivL(0);var f=$(a).position().top+c+"px",g=Math.floor($(a).position().left+0+d-352)+"px";$("#showDesc").load($(b).attr("desc"),function(){$("#showDesc").animate({width:"+=351px",left:g,top:f},"slow",function(){checkShowInfo("#showDesc",0),$("#showDesc").css({width:"351px",left:g}),$(".fClose").show(),initShowDescFancies(),drawDonut(e)})})}}function moveDivL(b){var a=lastIdShow<0?"#showsDiv":".selectedShow";if($(a).length){var c=$.browser.webkit?0:-1,d=$.browser.webkit?2:.5,e=$(a).position().left,f=$(a).position().top+c;$("tbody:first").width(),$("#showDesc").css({position:"absolute",top:f+"px",left:Math.floor(e+b+d)+"px",width:"0px",height:"auto","z-index":"2"}),descLoading||$("#showDesc").css({width:"351px"})}}function moveDivR(b){if(!epsPositioned){var a=lastIdShow<0?"#emptyTR":".selectedShow";if($(a).length){var c=$.browser.webkit?0:-1,d=$.browser.webkit?1:-0.5,e=$(a).position().left,f=$(a).position().top+c,g=$("tbody:first").width();$("#showInfo").css({position:"absolute",top:f+"px",left:Math.floor(e+g+d+b)+"px",width:"0px",height:"auto","z-index":"2"}),eplistLoading||$("#showInfo").css({width:"385px"})}}}function toggleAirdates(){if(isAdmin){var a=$("#showsTable").width();airdateVisible?($(".showName").removeClass("airdShown").addClass("airdHidden"),$(".airdate").hide(),a-=75):($(".showName").removeClass("airdHidden").addClass("airdShown"),$(".airdate").show(),a+=75),airdateVisible=!airdateVisible,$("#showsTable").css({width:a+"px"}).css({"min-width":a+"px"}),resizeAll(0)}}function checkForCheck(){return!unsaved||null==ids||""==ids||confirm("Attention:\nSelection will be lost!")}function clearSelectBoxes(c){var d=document.getElementsByTagName("input"),b=null!=c&&c.checked;for(null==c&&$("#clearSelectAll").attr("checked",!1),i=0;i<d.length;i++){var a=d[i];null!=a&&"copyAsScript"!==a.id&&"clearSelectAll"!==a.id&&("checkbox"!==a.type||a.checked===b||a.disabled||(a.checked=b,selected(a,!1,!1,isAdmin)))}var f=document.getElementById("result"),e=document.getElementById("movieList");null!=e&&(doRequest(),e.style.display=b?"block":"none",b||(f.innerHTML="",ids=""))}function doRequest(){doRequest__(!0,ids)}function saveSelection(){saveSelection__(!0,ids)}function drawDonut(a){if(null!=a&&!(a<0)){var b=null;if($("#donutChartPie").length)b=$("#donutChartPie").get(0).getContext("2d");else{console.log("Error: Canvas not found with selector #donutChartPie");return}ajax_chart(new Chart(b,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:[]}]},options:{cutout:"40%",borderWidth:0,plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}),"./detailSerieDesc.php?data&id="+a)}}function ajax_chart(c,b,a){var a=a||{};$.getJSON(b,a).done(function(a){c.data.labels=a.labels,c.data.datasets[0].backgroundColor=a.datasets[0].backgroundColor,c.data.datasets[0].data=a.datasets[0].data,c.update()})}function setAspectRatio(c,d,b=""){if(null===c||null===d)return;let a=prompt("Enter aspect ratio",b);null===a||""===a.trim()?b="":a=a.replace(",","."),null===a||""===a||isNaN(a)||(b=Number.parseFloat(a)),$.ajax("./dbEdit.php?act=setAspectRatio&noForward=1&idFile="+c+"&idMovie="+d+"&aRatio="+b)}$(document).ready(function(){$(".dropdown-toggle").dropdown(),$(document).keydown(function(a){bindF&&a.ctrlKey&&"70"==a.keyCode&&(a.preventDefault(),openNav("#dropSearch"),$("#searchDBfor").focus()),!isAdmin&&a.ctrlKey&&"83"==a.keyCode&&(a.preventDefault(),saveSelection())})}),$(window).resize(function(){resizeAll(0)}),$("#showsTable").ready(function(){resizeAll(0)})
