function closeShow(){$("#showDesc").hide(),$("#showEpDesc").hide(),$("#showInfo").hide(),$(".selectedShow").addClass("unselectedShow"),lastIdShow=0}function selSpanText(a){var b,c;window.getSelection&&document.createRange?(c=window.getSelection(),b=document.createRange(),b.selectNodeContents($(a)[0]),c.removeAllRanges(),c.addRange(b)):document.selection&&document.body.createTextRange&&(b=document.body.createTextRange(),b.moveToElementText($(a)[0]),b.select())}function openNav(a){openNav_(a,!0)}function openNav_(a,b){closeNavs_(b),$(a).addClass("open")}function closeNavs(){closeNavs_(!0)}function closeNavs_(a){$(".dropdown-submenu").removeClass("open"),$("#dropAdmin").removeClass("open"),$("#dropSearch").removeClass("open"),isAdmin&&$("#dropViewmode").removeClass("open"),a&&$("#dropLatestEps").removeClass("open")}function toggleActive(a){$(a).addClass("active")}function toggleDActive(a){$(a).removeClass("active")}function searchDbForString(a,b){if(null==a)return!1;var c=$.trim(a.value).toLowerCase(),d=getKeyCode(b);if(13!=d)return!1;var e="./?show=serien&dbSearch=";null!=c&&""!=c&&(e+=c),window.location.href=e}function resetDbSearch(){return""!=$("#searchDBfor").val()&&void(window.location.href="./?show=serien&dbSearch=")}function getKeyCode(a){return a=a||window.event,a.keyCode}function resizeAll(a){epsPositioned=!1,moveDivR(a),moveDivL(-351),moveDivEpDesc(-351)}function toggleEps(a,b,c){epsPositioned=!1,toggleEps_(a,b,c)}function toggleEps_(a,b,c){if(null!=b||null!=c){if(null==c){var d=a.replace("iD","tgl");c=document.getElementById(d)}$(".plmin").removeClass("showlink").addClass("hidelink");var e=!1,f=document.getElementsByTagName("TR");if(null!=f)for(var g=0;g<f.length;g++){var h=f[g];if(null!=h&&h.className.indexOf("epTR")!=-1){var i=h.className.indexOf(a)>-1;i?"none"==h.style.display?($(h).fadeIn(300,"linear"),e=!0):$(h).fadeOut(300,"linear"):"none"!=h.style.display&&$(h).hide()}}null!=c&&(e?($(c).removeClass("hidelink"),$(c).addClass("showlink")):($(c).removeClass("showlink"),$(c).addClass("hidelink"))),moveDivR(0),moveDivL(-351),moveDivEpDesc(-351)}}function spoilIt(){$("#epSpoiler").hide(),$("#epDescr").show()}function showGuests(){$("#epGuest").hide(),$("#epGuests").show()}function setFlagsBack(a){"#showInfo"==a?eplistLoading=!1:"#showDesc"==a?descLoading=!1:"#showEpDesc"==a&&(epDescLoading=!1)}function checkShowInfo(a,b){var c=0;do{if($(a).width()>0)return cursorBusy(""),resizeAll(b),void setFlagsBack(a);if(c++>100)return}while(0==$(a).width());setFlagsBack(a)}function cursorBusy(a){$("body").css("cursor",a),$("#xbmcDB").css("cursor",a),$("#showInfo").css("cursor",a),$("td").css("cursor",a),$("a").css("cursor",""==a?"pointer":a),$("a.fancy_msgbox, a.fancy_addEpisode, li.dropdown-submenu>a").css("cursor",""==a?"default":a)}function loadLatestShowInfo(a,b,c,d,e){fromNavbar=!0,$("#showInfo").hide(),loadShowInfoPlus(a,b,d,e),loadEpDetails(a,c),toggleEps_(d,e,null),epsPositioned=!1,moveDivR(3),$("#showInfo").show(),closeNavs()}function loadShowInfo(a,b){loadShowInfoPlus(a,b,null,null),moveDivR(-1)}function loadShowInfoPlus(a,b,c,d){if(!epDescLoading&&lastIdShow!=b)return cursorBusy("progress"),$("#showEpDesc").text(""),moveDivEpDesc(0),$(".sTR").children("TD").removeClass("selectedShow unselectedShow"),$("#iD"+b).children("TD").addClass("selectedShow"),loadEplistPlus(a,c,d),loadDesc(a,b),lastIdShow=b,lastIdEp=-1,!0}function loadEpDetails(a,b){epsPositioned=!1,epDescLoading||lastIdEp==b||($(".epTR").children("TD").removeClass("selectedShow"),$("#"+b).children("TD").addClass("selectedShow"),epDescLoadedOnce?$("#showEpDesc").fadeOut(100,"linear",function(){loadEpDetails_(a,b)}):loadEpDetails_(a,b),epDescLoadedOnce=!0)}function loadEpDetails_(a,b){return epDescLoading=!0,cursorBusy("progress"),$("#showEpDesc").text(""),$("#showEpDesc").show(),moveDivEpDesc(0),$("#showEpDesc").load($(a).attr("_href"),function(){$("#showEpDesc").animate({width:"+=351px",left:"-=352px",height:"+=400px"},"slow",function(){var a=$("#epDescription").height()+"px";checkShowInfo("#showEpDesc",1),$("#showEpDesc").css({width:"351px",height:a}),$("#"+b).children("TD").addClass("selectedShow")})}),lastIdEp=b,epsPositioned=!0,!1}function moveDivEpDesc(a){var b=lastIdShow<0?"#showsDiv":".selectedShow";if($(b).length){var c=1,d=$.browser.webkit?3:0,e=$(b).position().left,f=$("#showDesc").position().top+$(".showDesc").height()+c,h=($("#showDesc").width(),"auto"),i=f+"px",j=Math.floor(e+a+d)+"px";$("#showEpDesc").css({position:"absolute",top:i,left:j,width:"0px",height:h,"z-index":"2"}),epDescLoading||($("#showEpDesc").css({width:"351px"}),$("#epDescription").css({width:$.browser.webkit?"350px":"352px"}))}}function loadEplist(a){loadEplistPlus(a,null,null)}function loadEplistPlus(a,b,c){return epsPositioned=!1,!eplistLoading&&(epListLoadedOnce?$("#showInfo").fadeOut(200,"linear",function(){loadEplistPlus_(a,b,c)}):loadEplistPlus_(a,b,c),void(epListLoadedOnce=!0))}function loadEplist_(a){loadEplistPlus_(a,null,null)}function loadEplistPlus_(a,b,c){eplistLoading=!0,$("#showInfo").text(""),$("#showInfo").show(),moveDivR(0),$("#showInfo").load($(a).attr("eplist"),function(){$("#showInfo").animate({width:"+=385px"},"slow",function(){var a="auto";if(checkShowInfo("#showInfo",0),$("#showInfo").css({width:"385px",height:a}),$.browser.mozilla&&$("#showInfo").css({left:"+=1px"}),toggleEps(b,c,null),initShowEpFancies(),fromNavbar){var d=$(".selectedShow").offset().top-50;$("html, body").animate({scrollTop:d},250),fromNavbar=!1}})})}function loadDesc(a,b){return!descLoading&&(descLoadedOnce?$("#showDesc").fadeOut(200,"linear",function(){loadDesc_(a,b)}):loadDesc_(a,b),void(descLoadedOnce=!0))}function loadDesc_(a,b){var c=lastIdShow<0?"#showsDiv":".selectedShow";if($(c).length){var d=$.browser.webkit?0:-1,e=$.browser.webkit?3:1,f=0;descLoading=!0,$("#showDesc").text(""),$("#showDesc").show(),moveDivL(f);var g=$(c).position().top+d+"px",h=$(c).position().left,i=Math.floor(h+f+e-352)+"px";$("#showDesc").load($(a).attr("desc"),function(){$("#showDesc").animate({width:"+=351px",left:i,top:g},"slow",function(){checkShowInfo("#showDesc",0),$("#showDesc").css({width:"351px",left:i}),$(".fClose").show(),initShowDescFancies(),drawDonut(b)})})}}function moveDivL(a){var b=lastIdShow<0?"#showsDiv":".selectedShow";if($(b).length){var c=$.browser.webkit?0:-1,d=$.browser.webkit?2:.5,e=$(b).position().left,f=$(b).position().top+c,h=($("tbody:first").width(),"auto"),i=f+"px",j=Math.floor(e+a+d)+"px";$("#showDesc").css({position:"absolute",top:i,left:j,width:"0px",height:h,"z-index":"2"}),descLoading||$("#showDesc").css({width:"351px"})}}function moveDivR(a){if(!epsPositioned){var b=lastIdShow<0?"#emptyTR":".selectedShow";if($(b).length){var c=$.browser.webkit?0:-1,d=$.browser.webkit?1:-.5,e=$(b).position().left,f=$(b).position().top+c,g=$("tbody:first").width(),h="auto",i=f+"px",j=Math.floor(e+g+d+a)+"px";$("#showInfo").css({position:"absolute",top:i,left:j,width:"0px",height:h,"z-index":"2"}),eplistLoading||$("#showInfo").css({width:"385px"})}}}function toggleAirdates(){if(isAdmin){var a=$("#showsTable").width();airdateVisible?($(".showName").removeClass("airdShown").addClass("airdHidden"),$(".airdate").hide(),a-=75):($(".showName").removeClass("airdHidden").addClass("airdShown"),$(".airdate").show(),a+=75),airdateVisible=!airdateVisible,$("#showsTable").css({width:a+"px"}).css({"min-width":a+"px"}),resizeAll(0)}}function checkForCheck(){return!unsaved||(null==ids||""==ids||confirm("Attention:\nSelection will be lost!"))}function clearSelectBoxes(a){var b=document.getElementsByTagName("input"),c=null!=a&&a.checked;for(null==a&&$("#clearSelectAll").attr("checked",!1),i=0;i<b.length;i++){var d=b[i];null!=d&&"copyAsScript"!=d.id&&"clearSelectAll"!=d.id&&("checkbox"!=d.type||d.checked==c||d.disabled||(d.checked=c,selected(d,!1,!1,isAdmin)))}var e=document.getElementById("result"),f=document.getElementById("movieList");null!=f&&(doRequest(),f.style.display=c?"block":"none",c||(e.innerHTML="",ids=""))}function doRequest(){doRequest__(!0,ids)}function saveSelection(){saveSelection__(!0,ids)}function drawDonut(a){if(!(null==a||a<0)){var b="./detailSerieDesc?data&id="+a,c=$.ajax({url:b,dataType:"json",async:!1}).responseText,d=null!=c&&""!=c;if(d){var e=null;$("#donutChartPir").length?e=$("#donutChartPir").get(0).getContext("2d"):console.log("Error: Canvas not found with selector #donutChartPir");var f={percentageInnerCutout:45,showTooltips:!1,animationSteps:30,animation:!0,segmentShowStroke:!0,segmentStrokeWidth:1},g=null;null!=e&&(g=new Chart(e).Doughnut(null,f),$.each($.parseJSON(c),function(a,b){g.addData({value:b.value,color:b.color,highlight:b.highlight,label:b.label})}))}}}var airdateVisible=!1,epListLoadedOnce=!1,epDescLoadedOnce=!0,descLoadedOnce=!0,eplistLoading=!1,epDescLoading=!1,descLoading=!1,epsPositioned=!1,fromNavbar=!1,lastIdShow=-1,lastIdEp=-1,ids="",unsaved=!1;$(document).ready(function(){$(".dropdown-toggle").dropdown(),$(document).keydown(function(a){bindF&&a.ctrlKey&&"70"==a.keyCode&&(a.preventDefault(),openNav("#dropSearch"),$("#searchDBfor").focus()),isAdmin||a.ctrlKey&&"83"==a.keyCode&&(a.preventDefault(),saveSelection())})}),$(window).resize(function(){resizeAll(0)}),$("#showsTable").ready(function(){resizeAll(0)});