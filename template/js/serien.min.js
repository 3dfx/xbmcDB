function closeShow(){$("#showDesc").hide();$("#showEpDesc").hide();$("#showInfo").hide();$(".selectedShow").addClass("unselectedShow");lastIdShow=0}function selSpanText(e){var t,n;if(window.getSelection&&document.createRange){n=window.getSelection();t=document.createRange();t.selectNodeContents($(e)[0]);n.removeAllRanges();n.addRange(t)}else if(document.selection&&document.body.createTextRange){t=document.body.createTextRange();t.moveToElementText($(e)[0]);t.select()}}function openNav(e){openNav_(e,true)}function openNav_(e,t){closeNavs_(t);$(e).addClass("open")}function closeNavs(){closeNavs_(true)}function closeNavs_(e){$(".dropdown-submenu").removeClass("open");$("#dropAdmin").removeClass("open");$("#dropSearch").removeClass("open");if(isAdmin){$("#dropViewmode").removeClass("open")}if(e){$("#dropLatestEps").removeClass("open")}}function toggleActive(e){$(e).addClass("active")}function toggleDActive(e){$(e).removeClass("active")}function searchDbForString(e,t){if(e==null){return false}var n=$.trim(e.value).toLowerCase();var r=getKeyCode(t);if(r!=13){return false}var i="./?show=serien&dbSearch=";if(n!=null&&n!=""){i=i+n}window.location.href=i}function resetDbSearch(){if($("#searchDBfor").val()==""){return false}window.location.href="./?show=serien&dbSearch="}function getKeyCode(e){e=e||window.event;return e.keyCode}function resizeAll(e){epsPositioned=false;moveDivR(e);moveDivL(-351);moveDivEpDesc(-351)}function toggleEps(e,t,n){epsPositioned=false;toggleEps_(e,t,n)}function toggleEps_(e,t,n){if(t==null&&n==null){return}if(n==null){var r=e.replace("iD","tgl");n=document.getElementById(r)}$(".plmin").removeClass("showlink").addClass("hidelink");var i=false;var s=document.getElementsByTagName("TR");if(s!=null){for(var o=0;o<s.length;o++){var u=s[o];if(u==null||u.className.indexOf("epTR")==-1){continue}var a=u.className.indexOf(e)>-1;if(!a){if(u.style.display!="none"){$(u).hide()}continue}if(u.style.display=="none"){$(u).fadeIn(300,"linear");i=true}else{$(u).fadeOut(300,"linear")}}}if(n!=null){if(i){$(n).removeClass("hidelink");$(n).addClass("showlink")}else{$(n).removeClass("showlink");$(n).addClass("hidelink")}}moveDivR(i?1:0);moveDivL(-351);moveDivEpDesc(-351)}function spoilIt(){$("#epSpoiler").hide();$("#epDescr").show()}function showGuests(){$("#epGuest").hide();$("#epGuests").show()}function setFlagsBack(e){if(e=="#showInfo"){eplistLoading=false}else if(e=="#showDesc"){descLoading=false}else if(e=="#showEpDesc"){epDescLoading=false}}function checkShowInfo(e,t){var n=0;do{if($(e).width()>0){cursorBusy("");resizeAll(t);setFlagsBack(e);return}if(n++>100){return}}while($(e).width()==0);setFlagsBack(e)}function cursorBusy(e){$("body").css("cursor",e);$("#xbmcDB").css("cursor",e);$("#showInfo").css("cursor",e);$("td").css("cursor",e);$("a").css("cursor",e==""?"pointer":e);$("a.fancy_msgbox").css("cursor",e==""?"default":e)}function loadLatestShowInfo(e,t,n,r,i){fromNavbar=true;$("#showInfo").hide();loadShowInfoPlus(e,t,r,i);loadEpDetails(e,n);toggleEps_(r,i,null);epsPositioned=false;moveDivR(3);$("#showInfo").show();closeNavs()}function loadShowInfo(e,t){loadShowInfoPlus(e,t,null,null)}function loadShowInfoPlus(e,t,n,r){if(epDescLoading||lastIdShow==t){return}cursorBusy("progress");$("#showEpDesc").text("");moveDivEpDesc(0);$(".sTR").children("TD").removeClass("selectedShow unselectedShow");$("#iD"+t).children("TD").addClass("selectedShow");loadEplistPlus(e,n,r);loadDesc(e);lastIdShow=t;lastIdEp=-1;return true}function loadEpDetails(e,t){epsPositioned=false;if(epDescLoading||lastIdEp==t){return}$(".epTR").children("TD").removeClass("selectedShow");$("#"+t).children("TD").addClass("selectedShow");if(epDescLoadedOnce){$("#showEpDesc").fadeOut(100,"linear",function(){loadEpDetails_(e,t)})}else{loadEpDetails_(e,t)}epDescLoadedOnce=true}function loadEpDetails_(e,t){epDescLoading=true;cursorBusy("progress");$("#showEpDesc").text("");$("#showEpDesc").show();moveDivEpDesc(0);$("#showEpDesc").load($(e).attr("_href"),function(){$("#showEpDesc").animate({width:"+=351px",left:"-=352px",height:"+=400px"},"slow",function(){var e=$("#epDescription").height()+"px";checkShowInfo("#showEpDesc",1);$("#showEpDesc").css({width:"351px",height:e});$("#"+t).children("TD").addClass("selectedShow")})});lastIdEp=t;epsPositioned=true;return false}function moveDivEpDesc(e){var t=lastIdShow<0?"#showsDiv":".selectedShow";if(!$(t).length){return}var n=1;var r=$.browser.webkit?3:0;var i=$(t).position().left;var s=$("#showDesc").position().top+$(".showDesc").height()+n;var o=$("#showDesc").width();var u="5px";var a=s+"px";var f=Math.floor(i+e+r)+"px";$("#showEpDesc").css({position:"absolute",top:a,left:f,width:"0px",height:u,"z-index":"2"});if(!epDescLoading){$("#showEpDesc").css({width:"351px"});$("#epDescription").css({width:$.browser.webkit?"350px":"352px"})}}function loadEplist(e){loadEplistPlus(e,null,null)}function loadEplistPlus(e,t,n){epsPositioned=false;if(eplistLoading){return false}if(epListLoadedOnce){$("#showInfo").fadeOut(200,"linear",function(){loadEplistPlus_(e,t,n)})}else{loadEplistPlus_(e,t,n)}epListLoadedOnce=true}function loadEplist_(e){loadEplistPlus_(e,null,null)}function loadEplistPlus_(e,t,n){eplistLoading=true;$("#showInfo").text("");$("#showInfo").show();moveDivR(0);$("#showInfo").load($(e).attr("eplist"),function(){$("#showInfo").animate({width:"+=385px"},"slow",function(){var e=$("#serieTable").height()+"px";checkShowInfo("#showInfo",0);$("#showInfo").css({width:"385px",height:e});if($.browser.mozilla){$("#showInfo").css({left:"+=1px"})}toggleEps(t,n,null);initShowEpFancies();if(fromNavbar){var r=$(".selectedShow").offset().top-50;$("html, body").animate({scrollTop:r},250);fromNavbar=false}})})}function loadDesc(e){if(descLoading){return false}if(descLoadedOnce){$("#showDesc").fadeOut(200,"linear",function(){loadDesc_(e)})}else{loadDesc_(e)}descLoadedOnce=true}function loadDesc_(e){var t=lastIdShow<0?"#showsDiv":".selectedShow";if(!$(t).length){return}var n=$.browser.webkit?0:-1;var r=$.browser.webkit?3:1;var i=0;descLoading=true;$("#showDesc").text("");$("#showDesc").show();moveDivL(i);var s=$(t).position().top+n+"px";var o=$(t).position().left;var u=Math.floor(o+i+r-352)+"px";$("#showDesc").load($(e).attr("desc"),function(){$("#showDesc").animate({width:"+=351px",left:u,top:s},"slow",function(){checkShowInfo("#showDesc",0);$("#showDesc").css({width:"351px",left:u});$(".fClose").show();initShowDescFancies()})})}function moveDivL(e){var t=lastIdShow<0?"#showsDiv":".selectedShow";if(!$(t).length){return}var n=$.browser.webkit?0:-1;var r=$.browser.webkit?2:.5;var i=$(t).position().left;var s=$(t).position().top+n;var o=$("tbody:first").width();var u="350px";var a=s+"px";var f=Math.floor(i+e+r)+"px";$("#showDesc").css({position:"absolute",top:a,left:f,width:"0px",height:u,"z-index":"2"});if(!descLoading){$("#showDesc").css({width:"351px"})}}function moveDivR(e){if(epsPositioned){return}var t=lastIdShow<0?"#emptyTR":".selectedShow";if(!$(t).length){return}var n=$.browser.webkit?0:-1;var r=$.browser.webkit?1:-.5;var i=$(t).position().left;var s=$(t).position().top+n;var o=$("tbody:first").width();var u=$("#serieTable").height()+"px";var a=s+"px";var f=Math.floor(i+o+r+e)+"px";$("#showInfo").css({position:"absolute",top:a,left:f,width:"0px",height:u,"z-index":"2"});if(!eplistLoading){$("#showInfo").css({width:"385px"})}}function toggleAirdates(){if(!isAdmin){return}var e=$("#showsTable").width();if(airdateVisible){$(".showName").removeClass($.browser.webkit?"airdShown":"airdShownM").addClass("airdHidden");$(".airdate").hide();e-=75}else{$(".showName").removeClass("airdHidden").addClass($.browser.webkit?"airdShown":"airdShownM");$(".airdate").show();e+=75}airdateVisible=!airdateVisible;$("#showsTable").css({width:e+"px"});resizeAll(0)}function checkForCheck(){return ids!=null&&ids!=""?confirm("Attention:\nSelection will be lost!"):true}function clearSelectBoxes(e){var t=document.getElementsByTagName("input");var n=e!=null?e.checked:false;if(e==null){$("#clearSelectAll").attr("checked",false)}for(i=0;i<t.length;i++){var r=t[i];if(r==null){continue}if(r.id=="copyAsScript"||r.id=="clearSelectAll"){continue}if(r.type=="checkbox"&&r.checked!=n&&!r.disabled){r.checked=n;selected(r,false,false,isAdmin)}}var s=document.getElementById("result");var o=document.getElementById("movieList");if(o==null){return}doRequest();o.style.display=n?"block":"none";if(!n){s.innerHTML="";ids=""}}function selected(e,t,n,r){var i=$(e).parent().parent();if(e.checked){ids=ids+(ids.length==0?"":", ")+e.value;$(i).children("TD").addClass("highLighTR")}else{$(i).children("TD").removeClass("highLighTR");if(ids.indexOf(e.value+", ")!=-1){ids=ids.replace(e.value+", ","")}else if(ids.indexOf(", "+e.value)!=-1){ids=ids.replace(", "+e.value,"")}else if(ids.indexOf(",")==-1){ids=ids.replace(e.value,"")}}var s=document.getElementById("result");var o=document.getElementById("movieList");if(o==null){return}var u=document.getElementById("clearSelectAll");if(ids==""){o.style.display="none";s.innerHTML=""}else{o.style.display="block"}if(t){u.checked=ids==""?false:true}if(n){doRequest()}return true}function doRequest(){doRequest__(true,ids)}function saveSelection(){saveSelection__(true,ids)}var airdateVisible=false;var descLoadedOnce=true;var epListLoadedOnce=true;var epDescLoadedOnce=true;var eplistLoading=false;var epDescLoading=false;var descLoading=false;var epsPositioned=false;var fromNavbar=false;var lastIdShow=-1;var lastIdEp=-1;var ids="";$(document).ready(function(){$(".dropdown-toggle").dropdown();if(bindF){$(document).keydown(function(e){if(e.ctrlKey&&e.keyCode=="70"){e.preventDefault();openNav("#dropSearch");$("#searchDBfor").focus()}})}});$(window).resize(function(){resizeAll(0)});$("#showsTable").ready(function(){resizeAll(0)})